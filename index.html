<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HateMyProfessor - Better Professor & Course Reviews</title>
    <meta name="description" content="Find the best professors and courses with verified reviews, ratings, and tags.">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='0.9em' font-size='90'%3EðŸŽ“%3C/text%3E%3C/svg%3E" type="image/svg+xml">
    <meta property="og:title" content="HateMyProfessor - Better Professor & Course Reviews">
    <meta property="og:description" content="Find the best professors and courses with verified reviews, ratings, and tags.">
    <meta property="og:type" content="website">
    <meta property="og:url" content="/index.html">
    <meta name="twitter:card" content="summary_large_image">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #3f3f46 0%, #27272a 100%);
            --secondary-gradient: linear-gradient(135deg, #7c2d12 0%, #991b1b 100%);
            --accent-gradient: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            --success-gradient: linear-gradient(135deg, #065f46 0%, #047857 100%);
            --dark-bg: #050505;
            --card-bg: rgba(255, 255, 255, 0.03);
            --glass-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.08);
            --text-primary: #f8fafc;
            --text-secondary: rgba(248, 250, 252, 0.7);
            --text-muted: rgba(248, 250, 252, 0.4);
            --shadow-primary: 0 25px 50px rgba(0, 0, 0, 0.5);
            --shadow-secondary: 0 15px 35px rgba(0, 0, 0, 0.3);
            --shadow-subtle: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--dark-bg);
            background-image: 
                radial-gradient(circle at 20% 80%, rgba(63, 63, 70, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(39, 39, 42, 0.15) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(63, 63, 70, 0.1) 0%, transparent 50%);
            min-height: 100vh;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 60px;
            padding: 20px 0;
            background: transparent;
            backdrop-filter: none;
            border-radius: 0;
            border: none;
            box-shadow: none;
        }

        .header h1, .coursewise-title {
            font-size: 2.8rem;
            font-weight: 800;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            letter-spacing: -0.02em;
        }

        .header-logo {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-primary);
            letter-spacing: -0.01em;
            opacity: 0.9;
        }

        .header-nav {
            display: flex;
            align-items: center;
            gap: 40px;
        }

        .header-nav a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 1.1rem;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            padding: 0;
            border-radius: 0;
            background: transparent;
        }

        .header-nav a::after {
            content: '';
            position: absolute;
            bottom: -4px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--primary-gradient);
            transition: width 0.3s ease;
        }

        .header-nav a:hover {
            color: var(--text-primary);
            background: transparent;
        }

        .header-nav a:hover::after {
            width: 100%;
        }

        /* Hero Section */
        .hero-section {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 80px;
            padding: 60px 0;
            margin-bottom: 60px;
        }

        .hero-left {
            flex: 1;
            text-align: left;
        }

        .hero-right {
            flex: 1;
            text-align: left;
        }

        .hero-title {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 50%, #f87171 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 16px;
            letter-spacing: -0.02em;
            line-height: 1.1;
        }

        .hero-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 32px;
            font-weight: 500;
        }

        .hero-cta {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            border: none;
            padding: 16px 36px;
            border-radius: 16px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.25);
            font-family: 'Inter', sans-serif;
        }

        .hero-cta:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 32px rgba(220, 38, 38, 0.35);
        }

        .auth-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .auth-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 24px;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .email-input {
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            color: var(--text-primary);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .email-input::placeholder {
            color: var(--text-muted);
        }

        .email-input:focus {
            outline: none;
            border-color: rgba(63, 63, 70, 0.5);
            box-shadow: 0 0 0 3px rgba(63, 63, 70, 0.1);
            background: rgba(255, 255, 255, 0.12);
        }

        .verify-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 16px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .verify-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(63, 63, 70, 0.3);
        }

        .auth-success {
            text-align: center;
            padding: 20px;
            background: rgba(16, 185, 129, 0.1);
            border-radius: 16px;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .auth-actions {
            margin-top: 16px;
        }

        .signout-btn {
            background: rgba(239, 68, 68, 0.1);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .signout-btn:hover {
            background: rgba(239, 68, 68, 0.2);
            border-color: rgba(239, 68, 68, 0.5);
            transform: translateY(-1px);
        }

        .auth-loading {
            text-align: center;
            padding: 20px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .verification-step {
            text-align: center;
            padding: 20px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 16px;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .resend-btn {
            background: rgba(107, 114, 128, 0.1);
            color: #9ca3af;
            border: 1px solid rgba(107, 114, 128, 0.3);
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            margin-left: 12px;
        }

        .resend-btn:hover {
            background: rgba(107, 114, 128, 0.2);
            border-color: rgba(107, 114, 128, 0.5);
            color: #d1d5db;
        }

        .auth-hint {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-top: 12px;
            line-height: 1.4;
        }

        .user-stats {
            display: flex;
            gap: 20px;
            margin: 16px 0;
            justify-content: center;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
        }

        .stat-value {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-label {
            font-size: 0.85rem;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .profile-btn {
            background: rgba(59, 130, 246, 0.1);
            color: #3b82f6;
            border: 1px solid rgba(59, 130, 246, 0.3);
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            margin-right: 12px;
        }

        .profile-btn:hover {
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            transform: translateY(-1px);
        }

        .profile-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .profile-modal-content {
            background: rgba(20, 20, 25, 0.95);
            backdrop-filter: blur(40px);
            border-radius: 24px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-primary);
        }

        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .profile-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .close-profile {
            background: none;
            border: none;
            font-size: 2rem;
            color: var(--text-muted);
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .close-profile:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .profile-info {
            margin-bottom: 32px;
        }

        .profile-field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .profile-field:last-child {
            border-bottom: none;
        }

        .profile-field label {
            font-weight: 600;
            color: var(--text-primary);
        }

        .profile-field span {
            color: var(--text-secondary);
        }

        .profile-reviews h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .user-reviews-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .user-review-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 16px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
        }

        .review-meta {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .review-rating {
            font-weight: 600;
            color: var(--text-primary);
        }

        .review-date {
            font-size: 0.9rem;
            color: var(--text-muted);
        }

        .review-comment {
            color: var(--text-secondary);
            line-height: 1.5;
            margin: 0;
        }

        .no-reviews {
            text-align: center;
            color: var(--text-muted);
            font-style: italic;
            padding: 24px;
        }

        .integrated-search {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.06) 100%);
            border-radius: 24px;
            padding: 48px 40px;
            margin-bottom: 32px;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(20px);
        }

        .search-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
        }

        .search-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .tabs {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .tab {
            background: rgba(255, 255, 255, 0.06);
            border: 1px solid var(--border-color);
            color: var(--text-secondary);
            padding: 10px 20px;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
            font-family: 'Inter', sans-serif;
            font-size: 14px;
        }

        .tab.active {
            background: var(--primary-gradient);
            color: white;
            border-color: transparent;
            box-shadow: 0 4px 12px rgba(63, 63, 70, 0.2);
        }

        .tab:hover:not(.active) {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .search-box {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            position: relative;
        }

        .search-input {
            flex: 2;
            min-width: 300px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            color: var(--text-primary);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Inter', sans-serif;
        }

        .search-input::placeholder {
            color: var(--text-muted);
        }

        .search-input:focus {
            outline: none;
            border-color: rgba(63, 63, 70, 0.5);
            box-shadow: 0 0 0 3px rgba(63, 63, 70, 0.1);
            background: rgba(255, 255, 255, 0.12);
        }

        .school-select {
            flex: 1;
            min-width: 180px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            font-size: 16px;
            color: var(--text-primary);
            backdrop-filter: blur(10px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Inter', sans-serif;
            cursor: pointer;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23a1a1aa' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 12px center;
            background-size: 16px;
            padding-right: 40px;
        }

        .school-select:focus {
            outline: none;
            border-color: rgba(63, 63, 70, 0.5);
            box-shadow: 0 0 0 3px rgba(63, 63, 70, 0.1);
            background: rgba(255, 255, 255, 0.12);
        }

        .school-select option {
            background: #18181b;
            color: #f4f4f5;
            padding: 12px;
            border: none;
        }

        .school-select option:hover {
            background: #27272a;
        }

        .search-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 16px 28px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(63, 63, 70, 0.2);
            font-family: 'Inter', sans-serif;
            white-space: nowrap;
        }

        .search-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(63, 63, 70, 0.3);
        }

        /* Testimonial Section */
        .testimonial-section {
            display: flex;
            gap: 60px;
            align-items: center;
            padding: 40px 0;
            margin-bottom: 32px;
        }

        .testimonial-left {
            flex: 1;
            position: relative;
        }

        .quote-icon {
            font-size: 8rem;
            font-weight: 900;
            color: rgba(220, 38, 38, 0.6);
            position: absolute;
            top: -30px;
            left: -20px;
            line-height: 1;
            font-family: 'Inter', serif;
            text-shadow: 0 0 20px rgba(220, 38, 38, 0.3);
        }

        .testimonial-quote {
            font-size: 1.5rem;
            font-style: italic;
            color: var(--text-primary);
            line-height: 1.6;
            margin: 0 0 24px 0;
            position: relative;
            z-index: 1;
            font-weight: 500;
        }

        .testimonial-author {
            font-size: 1.1rem;
            color: var(--text-secondary);
            font-weight: 600;
            font-style: normal;
        }

        .testimonial-right {
            flex: 1;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.06) 100%);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(220, 38, 38, 0.3);
            backdrop-filter: blur(10px);
            position: relative;
            overflow: hidden;
        }

        .testimonial-right::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #dc2626 0%, #ef4444 50%, #f87171 100%);
        }

        .info-title {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 24px;
            letter-spacing: -0.01em;
        }

        .info-text {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 20px;
        }

        .info-text:last-child {
            margin-bottom: 0;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 28px;
            margin-top: 40px;
        }

        .professor-card {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 32px;
            border: 1px solid var(--border-color);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .professor-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-primary);
            border: 2px solid #dc2626;
        }



        .prof-header {
            display: flex;
            align-items: center;
            margin-bottom: 24px;
        }

        .prof-avatar {
            width: 72px;
            height: 72px;
            border-radius: 20px;
            background: var(--primary-gradient);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            font-size: 24px;
            margin-right: 20px;
            box-shadow: var(--shadow-subtle);
        }

        .prof-info h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 6px;
            color: var(--text-primary);
            letter-spacing: -0.01em;
        }

        .prof-info p {
            color: var(--text-secondary);
            font-size: 1rem;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .prof-info p:last-child {
            margin-bottom: 0;
        }

        .school-link {
            color: #a5b4fc;
            text-decoration: none;
            font-weight: 600;
            transition: color 0.3s ease;
        }

        .school-link:hover {
            color: #c7d2fe;
        }

        .courses-info {
            font-size: 0.9rem;
            font-style: italic;
            color: var(--text-muted);
            font-weight: 400;
        }

        .rating-section {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 28px 0;
            padding: 24px 0;
            border-top: 1px solid var(--border-color);
            border-bottom: 1px solid var(--border-color);
        }

        .rating-section.has-reviews {
            border-bottom: none;
            margin-bottom: 20px;
            padding-bottom: 20px;
        }

        .rating-item {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
        }

        .rating-number {
            font-size: 2rem;
            font-weight: 800;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: 'JetBrains Mono', monospace;
        }

        .rating-label {
            font-size: 0.9rem;
            color: var(--text-muted);
            font-weight: 500;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .tags {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 20px;
        }

        .tag {
            background: rgba(63, 63, 70, 0.2);
            color: #d4d4d8;
            padding: 8px 16px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 500;
            border: 1px solid rgba(63, 63, 70, 0.3);
            backdrop-filter: blur(10px);
        }

        .recent-reviews {
            margin-top: 0;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        
        .tags {
            margin-top: 0;
            margin-bottom: 12px;
        }

        .review-snippet {
            font-style: italic;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 12px;
            line-height: 1.6;
        }

        .review-meta {
            font-size: 0.85rem;
            color: var(--text-muted);
            font-weight: 500;
        }



        .floating-action {
            position: fixed;
            bottom: 40px;
            right: 40px;
            background: var(--secondary-gradient);
            color: white;
            border: none;
            width: 72px;
            height: 72px;
            border-radius: 20px;
            font-size: 28px;
            cursor: pointer;
            box-shadow: var(--shadow-primary);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
        }

        .floating-action:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
        }

        .modal-content {
            background: rgba(20, 20, 25, 0.95);
            backdrop-filter: blur(40px);
            margin: 1% auto;
            padding: 0;
            border-radius: 24px;
            max-width: 700px;
            max-height: 95vh;
            overflow-y: auto;
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: var(--shadow-primary);
            position: relative;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 32px 40px 24px;
            border-bottom: 1px solid var(--border-color);
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin: 0;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 28px;
            font-weight: 300;
            cursor: pointer;
            color: var(--text-muted);
            transition: all 0.3s ease;
            padding: 8px;
            border-radius: 8px;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .close-btn:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.1);
        }

        .form-section {
            padding: 40px 40px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .form-section:last-of-type {
            border-bottom: none;
            padding-bottom: 20px;
        }

        .section-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0 0 24px 0;
            padding-bottom: 8px;
            border-bottom: 2px solid rgba(63, 63, 70, 0.3);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
        }

        .form-group {
            margin-bottom: 24px;
        }

        .form-group:last-child {
            margin-bottom: 0;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            font-size: 16px;
            color: var(--text-primary);
            backdrop-filter: blur(10px);
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .form-group input::placeholder,
        .form-group textarea::placeholder {
            color: var(--text-muted);
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(63, 63, 70, 0.5);
            box-shadow: 0 0 0 4px rgba(63, 63, 70, 0.1);
            background: rgba(255, 255, 255, 0.12);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 140px;
            line-height: 1.6;
        }

        .ratings-grid {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }

        .rating-item {
            display: flex;
            flex-direction: column;
            gap: 16px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .rating-item label {
            font-weight: 600;
            color: var(--text-primary);
            font-size: 1.1rem;
            margin: 0;
        }

        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .rating-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: rgba(255, 255, 255, 0.1);
            outline: none;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .rating-slider::-webkit-slider-thumb {
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-gradient);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .rating-slider::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .rating-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-gradient);
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
        }

        .slider-labels {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            margin-top: 4px;
        }

        .slider-labels span:first-child,
        .slider-labels span:last-child {
            color: var(--text-muted);
            font-size: 0.85rem;
        }

        .rating-value {
            font-weight: 700;
            color: var(--text-primary);
            font-size: 1.4rem;
            font-family: 'JetBrains Mono', monospace;
            background: var(--accent-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-align: center;
            padding: 4px 8px;
            border-radius: 8px;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .tags-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .tag-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .tag-option:hover {
            background: rgba(255, 255, 255, 0.18);
            border-color: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
        }

        .tag-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            margin: 0;
            accent-color: #3f3f46;
            cursor: pointer;
        }

        .tag-option input[type="checkbox"]:checked + .tag-label {
            color: var(--text-primary);
            font-weight: 600;
        }

        .tag-label {
            font-size: 0.95rem;
            color: var(--text-secondary);
            font-weight: 500;
            cursor: pointer;
        }

        .character-count {
            text-align: right;
            font-size: 0.9rem;
            color: var(--text-muted);
            margin-top: 8px;
            font-weight: 500;
            padding: 4px 8px;
            background: rgba(255, 255, 255, 0.12);
            border-radius: 6px;
            display: inline-block;
            float: right;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 16px;
            padding: 24px 40px 32px;
            background: rgba(255, 255, 255, 0.05);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .cancel-btn {
            background: rgba(107, 114, 128, 0.1);
            color: #9ca3af;
            border: 1px solid rgba(107, 114, 128, 0.3);
            padding: 12px 24px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .cancel-btn:hover {
            background: rgba(107, 114, 128, 0.2);
            border-color: rgba(107, 114, 128, 0.5);
            color: #d1d5db;
        }

        .submit-btn {
            background: var(--primary-gradient);
            color: white;
            border: none;
            padding: 12px 32px;
            border-radius: 12px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            box-shadow: var(--shadow-subtle);
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-secondary);
        }

        .submit-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .search-results-dropdown {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-primary);
            margin-top: 8px;
            max-height: 400px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .search-result-item {
            padding: 16px 20px;
            cursor: pointer;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 16px;
            transition: all 0.3s ease;
        }

        .search-result-item:hover {
            background: rgba(255, 255, 255, 0.08);
        }

        .search-result-item:last-child {
            border-bottom: none;
        }

        .search-result-item .result-type {
            background: rgba(63, 63, 70, 0.2);
            color: #d4d4d8;
            padding: 6px 12px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .search-result-item .result-info {
            flex: 1;
        }

        .search-result-item .result-info h4 {
            margin: 0;
            font-size: 1rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .search-result-item .result-info p {
            margin: 4px 0 0;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .school-item, .school-card-custom {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 28px 20px;
            border: 1px solid var(--border-color);
            text-align: center;
            font-weight: 600;
            color: var(--text-primary);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 120px;
            font-size: 1.1rem;
        }

        .school-item:hover, .school-card-custom:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-secondary);
            border-color: rgba(63, 63, 70, 0.3);
        }

        .content-section {
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 48px 40px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-primary);
        }

        .content-text {
            font-size: 1.2rem;
            color: var(--text-secondary);
            line-height: 1.8;
        }

        .problems-grid {
            display: grid;
            gap: 24px;
        }

        .problem-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 32px;
            border: 1px solid var(--border-color);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(10px);
        }

        .problem-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-secondary);
            border-color: rgba(63, 63, 70, 0.3);
        }

        .problem-icon {
            display: block;
        }

        .problem-title {
            font-weight: 600;
            color: var(--text-primary);
        }

        .problem-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .cta-section {
            background: linear-gradient(135deg, rgba(220, 38, 38, 0.1) 0%, rgba(239, 68, 68, 0.05) 100%);
            border: 1px solid rgba(220, 38, 38, 0.3);
            border-radius: 20px;
            padding: 32px 20px;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 32px;
        }

        .cta-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, #dc2626 0%, #ef4444 50%, #f87171 100%);
        }

        .cta-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            letter-spacing: -0.01em;
        }

        .cta-text {
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 20px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.5;
        }

        .cta-button {
            background: linear-gradient(135deg, #dc2626 0%, #ef4444 100%);
            color: white;
            border: none;
            padding: 10px 24px;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 16px rgba(220, 38, 38, 0.18);
            font-family: 'Inter', sans-serif;
        }

        .cta-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(220, 38, 38, 0.25);
        }

        @media (max-width: 768px) {
            .cta-section {
                padding: 20px 10px;
            }
            .cta-title {
                font-size: 1.3rem;
            }
            .cta-text {
                font-size: 0.92rem;
            }
            .cta-button {
                padding: 8px 16px;
                font-size: 0.9rem;
            }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 16px;
            }
            
            .header {
                flex-direction: column;
                text-align: center;
                gap: 24px;
                padding: 24px;
            }
            
            .header-nav {
                justify-content: center;
                gap: 20px;
            }
            
            .header h1, .coursewise-title {
                font-size: 2.2rem;
            }
            
            .hero-section {
                flex-direction: column;
                gap: 40px;
                padding: 40px 0;
                margin-bottom: 40px;
            }
            
            .hero-left, .hero-right {
                text-align: center;
            }
            
            .hero-title {
                font-size: 2.5rem;
                margin-bottom: 16px;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
                margin-bottom: 24px;
            }
            
            .hero-cta {
                padding: 14px 32px;
                font-size: 1rem;
            }
            
            .auth-title {
                font-size: 1.5rem;
            }
            
            .auth-subtitle {
                font-size: 1rem;
            }
            
            .integrated-search {
                padding: 32px 24px;
            }
            
            .search-header {
                flex-direction: column;
                gap: 20px;
                align-items: flex-start;
            }
            
            .search-title {
                font-size: 1.5rem;
            }
            
            .tabs {
                align-self: stretch;
                justify-content: center;
            }
            
            .search-box, .auth-form {
                flex-direction: column;
            }
            
            .search-input, .school-select, .email-input {
                min-width: 100%;
            }
            
            .testimonial-section {
                flex-direction: column;
                gap: 40px;
                padding: 40px 0;
                text-align: center;
            }
            
            .quote-icon {
                font-size: 6rem;
                top: -20px;
                left: 50%;
                transform: translateX(-50%);
            }
            
            .testimonial-quote {
                font-size: 1.3rem;
            }
            
            .info-title {
                font-size: 1.7rem;
            }
            
            .info-text {
                font-size: 1rem;
            }
            
            .testimonial-right {
                padding: 32px 24px;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .professor-card {
                padding: 24px;
            }
            
            .content-section {
                padding: 32px 24px;
            }
            
            .problems-grid {
                grid-template-columns: 1fr !important;
            }
            
            .cta-section {
                padding: 32px 24px;
            }
            
            .cta-title {
                font-size: 2rem;
            }
            
            .cta-text {
                font-size: 1.1rem;
            }
            
            .rating-section {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .floating-action {
                width: 64px;
                height: 64px;
                bottom: 24px;
                right: 24px;
            }
            
            .modal-content {
                margin: 5% 16px;
                max-width: none;
                max-height: 85vh;
            }

            .modal-header {
                padding: 24px 24px 20px;
            }

            .modal-title {
                font-size: 1.5rem;
            }

            .form-section {
                padding: 24px;
            }

            .form-row {
                grid-template-columns: 1fr;
                gap: 16px;
            }

            .ratings-grid {
                gap: 24px;
            }

            .rating-item {
                padding: 16px;
            }

            .tags-grid {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .form-actions {
                padding: 20px 24px 24px;
                flex-direction: column;
                gap: 12px;
            }

            .cancel-btn,
            .submit-btn {
                width: 100%;
                padding: 16px;
            }
        }

        /* Large screens optimization */
        @media (min-width: 1200px) {
            .results-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
        }

        ::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Loading animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Selection styling */
        ::selection {
            background: rgba(63, 63, 70, 0.3);
            color: white;
        }

        /* Focus styling for accessibility */
        *:focus {
            outline: 2px solid rgba(63, 63, 70, 0.5);
            outline-offset: 2px;
        }

        .school-card-custom {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.04) 0%, rgba(255, 255, 255, 0.08) 100%);
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);
            padding: 38px 18px;
            margin: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: box-shadow 0.25s, transform 0.25s;
            min-height: 90px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
        }
        .school-card-custom:hover {
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);
            transform: translateY(-4px) scale(1.03);
            border-color: rgba(63, 63, 70, 0.3);
        }
        .school-card-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            letter-spacing: 0.01em;
            display: block;
            max-width: 90%;
            margin: 0 auto;
            word-break: break-word;
            white-space: normal;
        }
        .school-card-content {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <a href="index.html" class="header-logo" style="text-decoration: none; color: inherit;">HateMyProfessor</a>
            <nav class="header-nav">
                <a href="#professors">Professors</a>
                <a href="#schools">Schools</a>
                <a href="#classes">Classes</a>
            </nav>
        </header>

        <!-- Hero Section -->
        <div class="hero-section">
            <div class="hero-left">
                <h1 class="hero-title">Hate your professor?</h1>
                <p class="hero-subtitle">Leave your review now</p>
                <button class="hero-cta" onclick="openReviewModal()">Share Your Experience</button>
            </div>
            <div class="hero-right">
                <h3 class="auth-title">Verify Your Email</h3>
                <p class="auth-subtitle">Join with any email to access verified reviews (Demo Mode)</p>
            <div class="auth-form">
                    <input type="email" class="email-input" placeholder="your.email@anywhere.com" id="emailInput">
                <button class="verify-btn" onclick="verifyEmail()">Verify Email</button>
                </div>
            </div>
        </div>

        <!-- Integrated Search Section -->
        <div class="integrated-search">
            <div class="search-header">
                <h2 class="search-title">Find Reviews</h2>
            <div class="tabs">
                <button class="tab active" onclick="switchTab('professors')">Professors</button>
                    <button class="tab" onclick="switchTab('courses')">Courses</button>
                </div>
            </div>
            
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Search professors or courses..." id="searchInput">
                <select class="school-select" id="schoolSelect">
                    <option value="">All Schools</option>
                    <!-- Schools will be populated dynamically from data.json -->
                </select>
                <button class="search-btn" onclick="performSearch()">Search</button>
                <div id="searchResults" class="search-results-dropdown"></div>
            </div>
        </div>

        <!-- Testimonial & Info Section -->
        <div class="testimonial-section">
            <div class="testimonial-right">
                <h3 class="info-title">Why Reviews Matter</h3>
                <p class="info-text">
                    Choosing the right professor can make or break your academic experience. Our verified student reviews help you make informed decisions about your courses, understand teaching styles, and avoid professors who might not be the best fit for your learning goals.
                </p>
                <p class="info-text">
                    Don't leave your education to chance. Get the inside scoop on course difficulty, professor accessibility, and what to expect before you register.
                </p>
            </div>
            <div class="testimonial-left">
                <div class="quote-icon">"</div>
                <blockquote class="testimonial-quote">
                    Hate my professor saved me so much stress and work by helping me avoid horrible teachers at my school
                </blockquote>
                <cite class="testimonial-author">â€” Sarah M., Stanford University</cite>
            </div>
        </div>

        <!-- Condensed About Section -->
        <div class="content-section" id="whyDifferentSection" style="margin-bottom: 40px;">
            <h2 class="section-title">Why We're Different</h2>
            <p class="content-text" style="margin-bottom: 32px;">
                Traditional professor review sites have become popularity contests filled with fake reviews and outdated information. We built HateMyProfessor to solve these problems with verified student reviews and detailed, actionable feedback.
            </p>
            
            <div class="problems-grid" style="grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 20px;">
                <div class="problem-card" style="padding: 24px;">
                    <span class="problem-icon" style="font-size: 2rem; margin-bottom: 12px;">ðŸ¤–</span>
                    <h3 class="problem-title" style="font-size: 1.2rem; margin-bottom: 12px;">Verified Reviews Only</h3>
                    <p class="problem-description" style="font-size: 1rem;">
                        Every reviewer must verify their university email. No fake accounts or professor manipulation.
                    </p>
                </div>
                
                <div class="problem-card" style="padding: 24px;">
                    <span class="problem-icon" style="font-size: 2rem; margin-bottom: 12px;">ðŸ“</span>
                    <h3 class="problem-title" style="font-size: 1.2rem; margin-bottom: 12px;">Detailed Feedback</h3>
                    <p class="problem-description" style="font-size: 1rem;">
                        Structured reviews capture workload, teaching style, and what actually matters to students.
                    </p>
                </div>
                
                <div class="problem-card" style="padding: 24px;">
                    <span class="problem-icon" style="font-size: 2rem; margin-bottom: 12px;">ðŸŽ¯</span>
                    <h3 class="problem-title" style="font-size: 1.2rem; margin-bottom: 12px;">Course-Specific</h3>
                    <p class="problem-description" style="font-size: 1rem;">
                        Reviews tied to specific courses so you know exactly what to expect from each class.
                    </p>
                </div>
            </div>
        </div>

        <div style="display: flex; justify-content: flex-end; margin: 10px 20px;">
            <div id="schoolSortOptions" style="color: white; display: none;">
                <label for="schoolSort" style="margin-right: 10px;">Sort Schools:</label>
                <select id="schoolSort">
                    <option value="topRated">Top Rated</option>
                    <option value="alphabetical">Alphabetical</option>
                </select>
            </div>
        </div>

        <div class="results-grid" id="resultsGrid">
            <!-- Results will be inserted here -->
        </div>

        <!-- CTA Section -->
        <div class="cta-section" style="margin-top: 60px;">
            <h2 class="cta-title">Join the Movement</h2>
            <p class="cta-text">
                Help us build a platform where students can make smarter choices about their education. Share your experiences and let's fix the broken system together.
            </p>
            <button class="cta-button" onclick="openReviewModal()">Start Reviewing Professors</button>
        </div>
    </div>

    <button class="floating-action" onclick="openReviewModal()" title="Add Review">+</button>

    <!-- Review Modal -->
    <div id="reviewModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Add Your Review</h2>
                <button class="close-btn" onclick="closeReviewModal()">&times;</button>
            </div>
            
            <form id="reviewForm">
                <!-- Basic Information -->
                <div class="form-section">
                    <h3 class="section-title">Course Information</h3>
                    <div class="form-row">
                <div class="form-group">
                            <label for="professorName">Professor Name</label>
                            <input type="text" id="professorName" placeholder="e.g., Dr. Sarah Rodriguez" required>
                </div>
                <div class="form-group">
                            <label for="courseName">Course</label>
                            <input type="text" id="courseName" placeholder="e.g., CS 61A - Structure and Interpretation" required>
                        </div>
                    </div>
                </div>
                
                <!-- Ratings -->
                <div class="form-section">
                    <h3 class="section-title">Ratings</h3>
                    <div class="ratings-grid">
                        <div class="rating-item">
                            <label for="overallRating">Overall Rating</label>
                            <div class="slider-container">
                                <input type="range" class="rating-slider" min="1" max="5" value="3" step="0.1" id="overallRating">
                                <div class="slider-labels">
                                    <span>Poor</span>
                                    <span class="rating-value" id="overallValue">3.0</span>
                                    <span>Excellent</span>
                                </div>
                    </div>
                </div>
                
                        <div class="rating-item">
                            <label for="difficultyRating">Difficulty</label>
                            <div class="slider-container">
                                <input type="range" class="rating-slider" min="1" max="5" value="3" step="0.1" id="difficultyRating">
                                <div class="slider-labels">
                                    <span>Easy</span>
                                    <span class="rating-value" id="difficultyValue">3.0</span>
                                    <span>Very Hard</span>
                                </div>
                    </div>
                </div>
                
                        <div class="rating-item">
                            <label for="hoursWeek">Hours per Week</label>
                            <div class="slider-container">
                                <input type="range" class="rating-slider" min="1" max="40" value="5" id="hoursWeek">
                                <div class="slider-labels">
                                    <span>1h</span>
                                    <span class="rating-value" id="hoursValue">5h</span>
                                    <span>40h+</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Course Details -->
                <div class="form-section">
                    <h3 class="section-title">Course Details</h3>
                <div class="form-group">
                        <label for="takeAgain">Would you take this course again?</label>
                        <select id="takeAgain" class="custom-select">
                            <option value="yes-definitely">Yes, definitely</option>
                            <option value="probably-yes">Probably yes</option>
                            <option value="not-sure">Not sure</option>
                            <option value="probably-no">Probably no</option>
                            <option value="no-never">No, never</option>
                    </select>
                    </div>
                </div>
                
                <!-- Tags -->
                <div class="form-section">
                    <h3 class="section-title">Course Tags</h3>
                    <div class="tags-grid">
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="lots-of-reading">
                            <span class="tag-label">Lots of Reading</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="group-projects">
                            <span class="tag-label">Group Projects</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="attendance-required">
                            <span class="tag-label">Attendance Required</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="fair-grader">
                            <span class="tag-label">Fair Grader</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="helpful-office-hours">
                            <span class="tag-label">Helpful Office Hours</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="clear-lectures">
                            <span class="tag-label">Clear Lectures</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="heavy-homework">
                            <span class="tag-label">Heavy Homework</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="tough-exams">
                            <span class="tag-label">Tough Exams</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="engaging-discussions">
                            <span class="tag-label">Engaging Discussions</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="uses-textbook-heavily">
                            <span class="tag-label">Uses Textbook Heavily</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="project-based">
                            <span class="tag-label">Project-Based</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="lecture-heavy">
                            <span class="tag-label">Lecture Heavy</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="participation-matters">
                            <span class="tag-label">Participation Matters</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="curved-grading">
                            <span class="tag-label">Curved Grading</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="flexible-deadlines">
                            <span class="tag-label">Flexible Deadlines</span>
                        </label>
                        <label class="tag-option">
                            <input type="checkbox" name="tags" value="real-world-applications">
                            <span class="tag-label">Real-World Applications</span>
                        </label>
                    </div>
                </div>
                
                <!-- Review Text -->
                <div class="form-section">
                    <h3 class="section-title">Your Review</h3>
                <div class="form-group">
                        <label for="reviewComment">Share your experience</label>
                        <textarea id="reviewComment" placeholder="Tell other students about your experience with this course and professor. What did you like? What was challenging? Any tips for future students?" required></textarea>
                        <div class="character-count">
                            <span id="charCount">0</span>/500 characters
                        </div>
                        <div style="clear: both;"></div>
                    </div>
                </div>
                
                <!-- Submit Button -->
                <div class="form-actions">
                    <button type="button" class="cancel-btn" onclick="closeReviewModal()">Cancel</button>
                    <button type="submit" class="submit-btn">Submit Review</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Load data from data.json
        let professors = [];
        let schools = [];
        let courses = [];
        let isVerified = false;
        let currentUser = null;
        let searchTimeout = null;

        // Known university domains for validation
        const universityDomains = [
            'stanford.edu', 'mit.edu', 'harvard.edu', 'yale.edu', 'princeton.edu',
            'uchicago.edu', 'duke.edu', 'cornell.edu', 'caltech.edu', 'columbia.edu',
            'northwestern.edu', 'jhu.edu', 'nyu.edu', 'upenn.edu', 'nd.edu',
            'berkeley.edu', 'ucla.edu', 'usc.edu', 'umich.edu', 'uw.edu'
        ];

        async function loadData() {
            try {
                const response = await fetch('data.json?t=' + Date.now());
                const data = await response.json();
                professors = data.professors;
                schools = data.schools;
                courses = data.courses;
                // Populate school dropdown
                populateSchoolDropdown();
                // Don't show professors by default on homepage - only show when tabs are clicked
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // Email verification state
        let verificationState = {
            email: null,
            code: null,
            expiresAt: null,
            attempts: 0
        };

        // Auth persistence functions
        function saveAuthState(user) {
            localStorage.setItem('hateMyProfUser', JSON.stringify(user));
            localStorage.setItem('hateMyProfVerified', 'true');
        }

        function generateVerificationCode() {
            return Math.random().toString(36).substr(2, 6).toUpperCase();
        }

        function sendVerificationEmail(email, code) {
            // In a real app, this would send an actual email
            console.log(`Verification email sent to ${email} with code: ${code}`);
            
            // Simulate email sending with a delay
            return new Promise((resolve) => {
                setTimeout(() => {
                    resolve(true);
                }, 1000);
            });
        }

        function loadAuthState() {
            const verified = localStorage.getItem('hateMyProfVerified') === 'true';
            const user = localStorage.getItem('hateMyProfUser');
            if (verified && user) {
                isVerified = true;
                currentUser = JSON.parse(user);
                updateAuthUI();
            }
        }

        function clearAuthState() {
            localStorage.removeItem('hateMyProfUser');
            localStorage.removeItem('hateMyProfVerified');
            isVerified = false;
            currentUser = null;
            updateAuthUI();
        }

        function updateAuthUI() {
            const authSection = document.querySelector('.hero-right');
            if (isVerified && currentUser) {
                // Get user stats
                const userStats = getUserStats(currentUser.email);
                
                authSection.innerHTML = `
                    <div class="auth-success">
                        <h3 class="auth-title">âœ“ Welcome Back!</h3>
                        <p class="auth-subtitle">Signed in as ${currentUser.email}</p>
                        <div class="user-stats">
                            <div class="stat-item">
                                <span class="stat-value">${userStats.reviewsSubmitted}</span>
                                <span class="stat-label">Reviews</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-value">${userStats.memberSince}</span>
                                <span class="stat-label">Member Since</span>
                            </div>
                        </div>
                        <div class="auth-actions">
                            <button class="profile-btn" onclick="showUserProfile()">View Profile</button>
                            <button class="signout-btn" onclick="signOut()">Sign Out</button>
                        </div>
                    </div>
                `;
            } else {
                authSection.innerHTML = `
                    <h3 class="auth-title">Verify Your Email</h3>
                    <p class="auth-subtitle">Join with any email to access verified reviews (Demo Mode)</p>
                    <div class="auth-form">
                        <input type="email" class="email-input" placeholder="your.email@anywhere.com" id="emailInput">
                        <button class="verify-btn" onclick="verifyEmail()">Verify Email</button>
                    </div>
                `;
            }
        }

        function getUserStats(email) {
            // Get user's review count from localStorage
            const userReviews = JSON.parse(localStorage.getItem('userReviews_' + email) || '[]');
            const memberSince = currentUser.verifiedAt ? new Date(currentUser.verifiedAt).toLocaleDateString('en-US', { month: 'short', year: 'numeric' }) : 'Recently';
            
            return {
                reviewsSubmitted: userReviews.length,
                memberSince: memberSince
            };
        }

        function showUserProfile() {
            const userStats = getUserStats(currentUser.email);
            const userReviews = JSON.parse(localStorage.getItem('userReviews_' + currentUser.email) || '[]');
            
            // Create modal for user profile
            const modal = document.createElement('div');
            modal.className = 'profile-modal';
            modal.innerHTML = `
                <div class="profile-modal-content">
                    <div class="profile-header">
                        <h2 class="profile-title">User Profile</h2>
                        <button class="close-profile" onclick="closeUserProfile()">&times;</button>
                    </div>
                    <div class="profile-info">
                        <div class="profile-field">
                            <label>Email:</label>
                            <span>${currentUser.email}</span>
                        </div>
                        <div class="profile-field">
                            <label>University:</label>
                            <span>${currentUser.domain}</span>
                        </div>
                        <div class="profile-field">
                            <label>Member Since:</label>
                            <span>${new Date(currentUser.verifiedAt).toLocaleDateString()}</span>
                        </div>
                        <div class="profile-field">
                            <label>Reviews Submitted:</label>
                            <span>${userStats.reviewsSubmitted}</span>
                        </div>
                    </div>
                    <div class="profile-reviews">
                        <h3>Your Reviews</h3>
                        <div class="user-reviews-list">
                            ${userReviews.length > 0 ? userReviews.map(review => `
                                <div class="user-review-item">
                                    <div class="review-meta">
                                        <span class="review-rating">${review.overallRating}/5 â­</span>
                                        <span class="review-date">${new Date(review.submittedAt).toLocaleDateString()}</span>
                                    </div>
                                    <p class="review-comment">${review.comment}</p>
                                </div>
                            `).join('') : '<p class="no-reviews">No reviews submitted yet.</p>'}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
        }

        function closeUserProfile() {
            const modal = document.querySelector('.profile-modal');
            if (modal) {
                modal.remove();
            }
        }

        function validateUniversityEmail(email) {
            if (!email || !email.includes('@')) return false;
            
            const domain = email.split('@')[1]?.toLowerCase();
            if (!domain) return false;
            
            // DEMO MODE: Allow any email for testing
            // In production, you'd want to remove this and only allow .edu emails
            if (email.includes('@')) return true;
            
            // Check if it's a known university domain
            if (universityDomains.includes(domain)) return true;
            
            // Check if it ends with .edu
            if (domain.endsWith('.edu')) return true;
            
            return false;
        }

        function populateSchoolDropdown() {
            const schoolSelect = document.getElementById('schoolSelect');
            // Clear existing options except "All Schools"
            schoolSelect.innerHTML = '<option value="">All Schools</option>';
            // Add schools from data.json using IDs
            schools.forEach(school => {
                const option = document.createElement('option');
                option.value = school.id;
                option.textContent = school.name;
                schoolSelect.appendChild(option);
            });
        }
        loadData();
        
        // Handle hash-based navigation
        function handleHashNavigation() {
            // Prevent any scrolling during navigation
            window.scrollTo(0, 0);
            
            const hash = window.location.hash.substring(1); // Remove the #
            switch(hash) {
                case 'professors':
                    hideHeroSection();
                    document.getElementById('whyDifferentSection').style.display = 'none';
                    showAllProfessors({preventDefault: () => {}});
                    // Prevent scroll after content loads
                    setTimeout(() => window.scrollTo(0, 0), 0);
                    setTimeout(() => window.scrollTo(0, 0), 100);
                    break;
                case 'schools':
                    hideHeroSection();
                    document.getElementById('whyDifferentSection').style.display = 'none';
                    showAllSchools({preventDefault: () => {}});
                    // Prevent scroll after content loads
                    setTimeout(() => window.scrollTo(0, 0), 0);
                    setTimeout(() => window.scrollTo(0, 0), 100);
                    break;
                case 'classes':
                    hideHeroSection();
                    showAllCourses({preventDefault: () => {}});
                    // Prevent scroll after content loads
                    setTimeout(() => window.scrollTo(0, 0), 0);
                    setTimeout(() => window.scrollTo(0, 0), 100);
                    break;
                default:
                    // Default behavior - show homepage
                    document.getElementById('whyDifferentSection').style.display = 'block';
                    window.scrollTo(0, 0);
                    break;
            }
        }

        // Listen for hash changes - prevent default scroll behavior
        window.addEventListener('hashchange', (e) => {
            e.preventDefault();
            window.scrollTo(0, 0);
            handleHashNavigation();
        });
        
        // Handle initial load with hash - delay to prevent scroll
        window.addEventListener('load', () => {
            window.scrollTo(0, 0);
            setTimeout(() => {
                handleHashNavigation();
                window.scrollTo(0, 0);
            }, 0);
        });
        
        async function verifyEmail() {
            const email = document.getElementById('emailInput').value.trim();
            
            if (!email) {
                alert('Please enter your email address');
                return;
            }
            
            if (!validateUniversityEmail(email)) {
                alert('Please use a valid email address (any email works in demo mode)');
                return;
            }
            
            // Generate verification code
            const code = generateVerificationCode();
            verificationState = {
                email: email,
                code: code,
                expiresAt: Date.now() + (10 * 60 * 1000), // 10 minutes
                attempts: 0
            };
            
            // Show loading state
            const authSection = document.querySelector('.hero-right');
            authSection.innerHTML = `
                <div class="auth-loading">
                    <h3 class="auth-title">Sending Verification Code...</h3>
                    <p class="auth-subtitle">Please wait while we send a code to ${email}</p>
                </div>
            `;
            
            try {
                // Send verification email (simulated)
                await sendVerificationEmail(email, code);
                
                // Show verification code input
                showVerificationCodeInput();
                
            } catch (error) {
                alert('Failed to send verification email. Please try again.');
                updateAuthUI();
            }
        }

        function showVerificationCodeInput() {
            const authSection = document.querySelector('.hero-right');
            authSection.innerHTML = `
                <div class="verification-step">
                    <h3 class="auth-title">Check Your Email</h3>
                    <p class="auth-subtitle">We sent a verification code to ${verificationState.email}</p>
                    <div class="auth-form">
                        <input type="text" class="email-input" placeholder="Enter 6-digit code" id="verificationCodeInput" maxlength="6" style="text-transform: uppercase;">
                        <div class="auth-actions">
                            <button class="verify-btn" onclick="verifyCode()">Verify Code</button>
                            <button class="resend-btn" onclick="resendCode()">Resend Code</button>
                        </div>
                    </div>
                    <p class="auth-hint">Code expires in 10 minutes. For demo purposes, check the browser console for the code.</p>
                </div>
            `;
        }

        function verifyCode() {
            const inputCode = document.getElementById('verificationCodeInput').value.trim().toUpperCase();
            
            if (!inputCode) {
                alert('Please enter the verification code');
                return;
            }
            
            // Check if code is expired
            if (Date.now() > verificationState.expiresAt) {
                alert('Verification code has expired. Please request a new one.');
                updateAuthUI();
                return;
            }
            
            // Check attempts
            verificationState.attempts++;
            if (verificationState.attempts > 5) {
                alert('Too many failed attempts. Please start over.');
                updateAuthUI();
                return;
            }
            
            // Verify code
            if (inputCode === verificationState.code) {
                // Success! Create user and save auth state
                const user = {
                    email: verificationState.email,
                    domain: verificationState.email.split('@')[1],
                    verifiedAt: new Date().toISOString(),
                    id: 'user_' + Date.now()
                };
                
                isVerified = true;
                currentUser = user;
                saveAuthState(user);
                
                // Show success message
                const authSection = document.querySelector('.hero-right');
                authSection.innerHTML = `
                    <div class="auth-success">
                        <h3 class="auth-title">âœ“ Email Verified!</h3>
                        <p class="auth-subtitle">Welcome to HateMyProfessor!</p>
                        <p style="font-size: 0.9rem; color: var(--text-muted); margin-top: 8px;">
                            You can now access all reviews and add your own.
                        </p>
                    </div>
                `;
                
                // Update to normal signed-in state after 3 seconds
                setTimeout(() => {
                    updateAuthUI();
                }, 3000);
                
                // Clear verification state
                verificationState = { email: null, code: null, expiresAt: null, attempts: 0 };
                
            } else {
                alert(`Invalid verification code. ${5 - verificationState.attempts} attempts remaining.`);
            }
        }

        async function resendCode() {
            if (!verificationState.email) {
                alert('Please start the verification process again.');
                updateAuthUI();
                return;
            }
            
            // Generate new code
            const newCode = generateVerificationCode();
            verificationState.code = newCode;
            verificationState.expiresAt = Date.now() + (10 * 60 * 1000);
            verificationState.attempts = 0;
            
            try {
                await sendVerificationEmail(verificationState.email, newCode);
                alert('New verification code sent! Check your email.');
            } catch (error) {
                alert('Failed to resend verification code. Please try again.');
            }
        }
        
        function signOut() {
            if (confirm('Are you sure you want to sign out?')) {
                clearAuthState();
            }
        }
        
        function switchTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            performSearch();
        }

        function showSearchResults(query) {
            const dropdown = document.getElementById('searchResults');
            if (!query) {
                dropdown.style.display = 'none';
                return;
            }
            const activeTab = document.querySelector('.tab.active').textContent.toLowerCase();
            const schoolId = document.getElementById('schoolSelect').value;
            let results = [];
            if (activeTab === 'professors') {
                results = professors.filter(prof => {
                    const matchesQuery = (`${prof.firstName} ${prof.lastName}`.toLowerCase().includes(query) ||
                        (prof.departments && prof.departments.some(dept => dept.toLowerCase().includes(query))));
                    let matchesSchool = true;
                    if (schoolId) {
                        matchesSchool = prof.schoolAffiliations.some(aff => 
                            aff.schoolId === schoolId && aff.isCurrent
                        );
                    }
                    return matchesQuery && matchesSchool;
                }).map(prof => {
                    // Find current school name
                    let currentSchool = '';
                    const currentAff = prof.schoolAffiliations.find(aff => aff.isCurrent);
                    if (currentAff) {
                        const schoolObj = schools.find(s => s.id === currentAff.schoolId);
                        if (schoolObj) currentSchool = schoolObj.name;
                    }
                    return {
                        type: 'Professor',
                        title: `${prof.firstName} ${prof.lastName}`,
                        subtitle: `${prof.departments ? prof.departments.join(', ') : ''}${currentSchool ? ' â€¢ ' + currentSchool : ''}`,
                        id: prof.id
                    };
                });
            } else {
                // Courses tab: search courses
                results = courses.filter(course => {
                    const matchesQuery = (course.name.toLowerCase().includes(query) ||
                        course.code.toLowerCase().includes(query));
                    let matchesSchool = true;
                    if (schoolId) {
                        matchesSchool = course.schoolId === schoolId;
                    }
                    return matchesQuery && matchesSchool;
                }).map(course => {
                    // Find school name
                    let schoolName = '';
                    const schoolObj = schools.find(s => s.id === course.schoolId);
                    if (schoolObj) schoolName = schoolObj.name;
                    return {
                        type: 'Course',
                        title: `${course.code}: ${course.name}`,
                        subtitle: `${course.department}${schoolName ? ' â€¢ ' + schoolName : ''}`,
                        id: course.id
                    };
                });
            }
            if (results.length > 0) {
                dropdown.innerHTML = results.map(result => `
                    <div class="search-result-item" onclick="selectSearchResult('${result.type}', '${result.id}')">
                        <span class="result-type">${result.type}</span>
                        <div class="result-info">
                            <h4>${result.title}</h4>
                            <p>${result.subtitle}</p>
                        </div>
                    </div>
                `).join('');
                dropdown.style.display = 'block';
            } else {
                dropdown.style.display = 'none';
            }
        }

        function selectSearchResult(type, id) {
            if (type === 'Professor') {
                window.location.href = `professor.html?id=${id}`;
            } else {
                window.location.href = `course.html?id=${id}`;
            }
        }
        
        function performSearch() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            const schoolId = document.getElementById('schoolSelect').value;
            const activeTab = document.querySelector('.tab.active').textContent.toLowerCase();
            let results = [];
            if (activeTab === 'professors') {
                results = professors.filter(prof => {
                    const matchesQuery = (`${prof.firstName} ${prof.lastName}`.toLowerCase().includes(query) ||
                        (prof.departments && prof.departments.some(dept => dept.toLowerCase().includes(query))));
                    let matchesSchool = true;
                    if (schoolId) {
                        matchesSchool = prof.schoolAffiliations.some(aff => 
                            aff.schoolId === schoolId && aff.isCurrent
                        );
                    }
                    return matchesQuery && matchesSchool;
                });
                displayResults(results, 'professors');
            } else {
                // Courses tab
                results = courses.filter(course => {
                    const matchesQuery = (course.name.toLowerCase().includes(query) ||
                        course.code.toLowerCase().includes(query));
                    let matchesSchool = true;
                    if (schoolId) {
                        matchesSchool = course.schoolId === schoolId;
                    }
                    return matchesQuery && matchesSchool;
                });
                displayResults(results, 'courses');
            }
            document.getElementById('searchResults').style.display = 'none';
        }

        function displayResults(results, type) {
            window.scrollTo(0, 0); // Ensure at top before displaying
            const resultsGrid = document.getElementById('resultsGrid');
            resultsGrid.innerHTML = '';
            if (results.length === 0) {
                resultsGrid.innerHTML = `
                    <div style="text-align: center; color: white; grid-column: 1/-1; padding: 40px;">
                        <p>No ${type} found matching your search criteria.</p>
                        <p style="margin-top: 10px; opacity: 0.8;">Try adjusting your search filters or using different keywords.</p>
                    </div>
                `;
                return;
            }
            if (type === 'professors') {
                results.forEach(prof => {
                    const card = createProfessorCard(prof);
                    resultsGrid.appendChild(card);
                });
                resultsGrid.style.gridTemplateColumns = 'repeat(auto-fit, minmax(320px, 1fr))';
            } else if (type === 'courses') {
                results.forEach(course => {
                    const card = createCourseCard(course);
                    resultsGrid.appendChild(card);
                });
                resultsGrid.style.gridTemplateColumns = 'repeat(auto-fit, minmax(320px, 1fr))';
            } else if (type === 'schools') {
                results.forEach(school => {
                    const card = createSchoolCard(school);
                    resultsGrid.appendChild(card);
                });
                resultsGrid.style.gridTemplateColumns = 'repeat(4, 1fr)';
            }
            // Ensure at top after displaying results
            window.scrollTo(0, 0);
            setTimeout(() => window.scrollTo(0, 0), 50);
        }

        function createProfessorCard(professor) {
            const card = document.createElement('div');
            card.className = 'professor-card';
            card.onclick = () => window.location.href = `professor.html?id=${professor.id}`;
            const initials = `${professor.firstName[0] || ''}${professor.lastName[0] || ''}`.toUpperCase();
            const latestReview = professor.reviews && professor.reviews.length > 0 ? professor.reviews[0] : null;
            
            // Find the current school affiliation
            const currentSchool = professor.schoolAffiliations?.find(affiliation => affiliation.isCurrent);
            const schoolId = currentSchool?.schoolId;
            const school = schools?.find(s => s.id === schoolId);
            const schoolName = school?.name || 'Unknown School';
            
            // Look up course name from courseId
            let courseName = '';
            if (latestReview && latestReview.courseId && courses) {
                const course = courses.find(c => c.id === latestReview.courseId);
                if (course) {
                    courseName = `${course.code}: ${course.name}`;
                }
            }
            
            card.innerHTML = `
                <div class="prof-header">
                    <div class="prof-avatar">${initials}</div>
                    <div class="prof-info">
                        <h3>${professor.firstName} ${professor.lastName}</h3>
                        <p><a href="school.html?id=${schoolId}" class="school-link">${schoolName}</a></p>
                        <p class="courses-info">${professor.departments ? professor.departments.join(', ') : ''}</p>
                    </div>
                </div>
                <div class="rating-section${latestReview ? ' has-reviews' : ''}">
                    <div class="rating-item">
                        <div class="rating-number">${professor.ratings.overall.toFixed(1)}</div>
                        <div class="rating-label">Overall</div>
                    </div>
                    <div class="rating-item">
                        <div class="rating-number">${professor.ratings.difficulty.toFixed(1)}</div>
                        <div class="rating-label">Difficulty</div>
                    </div>
                    <div class="rating-item">
                        <div class="rating-number">${professor.ratings.wouldTakeAgain ? (professor.ratings.wouldTakeAgain * 100).toFixed(0) : 'N/A'}%</div>
                        <div class="rating-label">Would Take Again</div>
                    </div>
                </div>
                ${latestReview ? `
                <div class="tags">
                    ${(latestReview.tags || []).map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                <div class="recent-reviews">
                    <div class="review-snippet">
                        "${latestReview.comment || latestReview.text || ''}"
                    </div>
                    <div class="review-meta">${courseName || 'Course'} â€¢ ${latestReview.date ? new Date(latestReview.date).toLocaleDateString() : ''}</div>
                </div>
                ` : ''}
            `;
            return card;
        }

        function createCourseCard(course) {
            const card = document.createElement('div');
            card.className = 'professor-card';
            card.onclick = () => window.location.href = `course.html?id=${course.id}`;
            card.innerHTML = `
                <div class="prof-header">
                    <div class="prof-info">
                        <h3>${course.code}: ${course.name}</h3>
                        <p>${course.department}</p>
                    </div>
                </div>
                <div class="rating-section">
                    <div class="rating-item">
                        <div class="rating-number">${course.ratings.overall.toFixed(1)}</div>
                        <div class="rating-label">Overall</div>
                    </div>
                    <div class="rating-item">
                        <div class="rating-number">${course.ratings.difficulty.toFixed(1)}</div>
                        <div class="rating-label">Difficulty</div>
                    </div>
                    <div class="rating-item">
                        <div class="rating-number">${course.ratings.workload.toFixed(1)}</div>
                        <div class="rating-label">Workload</div>
                    </div>
                </div>
            `;
            return card;
        }

        function createSchoolCard(school) {
            const card = document.createElement('div');
            card.className = 'school-card-custom';
            card.onclick = () => window.location.href = `school.html?id=${school.id}`;
            card.innerHTML = `
                <div class="school-card-content">
                    <span class="school-card-title">${school.name}</span>
                </div>
            `;
            return card;
        }

        // Add custom styles for school cards
        const style = document.createElement('style');
        style.innerHTML = `
        .school-card-custom {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.04) 0%, rgba(255, 255, 255, 0.08) 100%);
            border-radius: 18px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3), 0 2px 8px rgba(0, 0, 0, 0.2);
            padding: 38px 18px;
            margin: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: box-shadow 0.25s, transform 0.25s;
            min-height: 90px;
            border: 1px solid rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
        }
        .school-card-custom:hover {
            box-shadow: 0 16px 48px rgba(0, 0, 0, 0.4), 0 4px 16px rgba(0, 0, 0, 0.3);
            transform: translateY(-4px) scale(1.03);
            border-color: rgba(63, 63, 70, 0.3);
        }
        .school-card-title {
            font-size: 1.15rem;
            font-weight: 700;
            color: var(--text-primary);
            text-align: center;
            letter-spacing: 0.01em;
            display: block;
            max-width: 90%;
            margin: 0 auto;
            word-break: break-word;
            white-space: normal;
        }
        .school-card-content {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
        }
        `;
        document.head.appendChild(style);

        function openReviewModal() {
            if (!isVerified) {
                alert('Please verify your student email first to add reviews');
                return;
            }
            document.getElementById('reviewModal').style.display = 'block';
        }
        
        function closeReviewModal() {
            document.getElementById('reviewModal').style.display = 'none';
        }
        
        // Slider updates
        document.getElementById('overallRating').oninput = function() {
            document.getElementById('overallValue').textContent = parseFloat(this.value).toFixed(1);
        }
        
        document.getElementById('difficultyRating').oninput = function() {
            document.getElementById('difficultyValue').textContent = parseFloat(this.value).toFixed(1);
        }
        
        document.getElementById('hoursWeek').oninput = function() {
            document.getElementById('hoursValue').textContent = this.value + 'h';
        }

        // Character counting for review text
        document.getElementById('reviewComment').oninput = function() {
            const charCount = this.value.length;
            document.getElementById('charCount').textContent = charCount;
            
            // Change color based on character count
            const counter = document.getElementById('charCount');
            if (charCount > 450) {
                counter.style.color = '#ef4444';
            } else if (charCount > 350) {
                counter.style.color = '#f59e0b';
            } else {
                counter.style.color = 'var(--text-muted)';
            }
        }
        
        // Form submission
        document.getElementById('reviewForm').onsubmit = function(e) {
            e.preventDefault();
            
            if (!isVerified || !currentUser) {
                alert('Please verify your student email first to submit reviews');
                return;
            }
            
            // Get all form data
            const formData = {
                id: 'review_' + Date.now(),
                professorName: document.getElementById('professorName').value,
                courseName: document.getElementById('courseName').value,
                overallRating: parseFloat(document.getElementById('overallRating').value).toFixed(1),
                difficultyRating: parseFloat(document.getElementById('difficultyRating').value).toFixed(1),
                hoursPerWeek: document.getElementById('hoursWeek').value,
                takeAgain: document.getElementById('takeAgain').value,
                comment: document.getElementById('reviewComment').value,
                submittedBy: currentUser.email,
                submittedAt: new Date().toISOString(),
                userDomain: currentUser.domain,
                tags: Array.from(document.querySelectorAll('input[name="tags"]:checked')).map(cb => cb.value)
            };
            
            // Validate required fields
            if (!formData.professorName || !formData.courseName || !formData.comment) {
                alert('Please fill in all required fields (Professor Name, Course, and Review)');
                return;
            }
            
            if (formData.comment.length > 500) {
                alert('Review comment must be 500 characters or less');
                return;
            }
            
            // Save review to user's review history
            saveUserReview(formData);
            
            // Show success message with detailed info
            const successMessage = `Review submitted successfully!

Professor: ${formData.professorName}
Course: ${formData.courseName}
Overall Rating: ${formData.overallRating}/5
Difficulty: ${formData.difficultyRating}/5
Hours per Week: ${formData.hoursPerWeek}h
Take Again: ${formData.takeAgain.replace('-', ' ')}
Tags: ${formData.tags.length > 0 ? formData.tags.join(', ') : 'None'}

Your review has been saved to your profile.`;
            
            alert(successMessage);
            closeReviewModal();
            
            // Reset form
            resetReviewForm();
        }

        function resetReviewForm() {
            document.getElementById('reviewForm').reset();
            document.getElementById('overallValue').textContent = '3.0';
            document.getElementById('difficultyValue').textContent = '3.0';
            document.getElementById('hoursValue').textContent = '5h';
            document.getElementById('charCount').textContent = '0';
            document.getElementById('charCount').style.color = 'var(--text-muted)';
        }

        function saveUserReview(reviewData) {
            const userEmail = currentUser.email;
            const existingReviews = JSON.parse(localStorage.getItem('userReviews_' + userEmail) || '[]');
            existingReviews.push(reviewData);
            localStorage.setItem('userReviews_' + userEmail, JSON.stringify(existingReviews));
        }
        
        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('reviewModal');
            if (event.target == modal) {
                closeReviewModal();
            }
        }

        // Add event listener for search input with debounce
        document.getElementById('searchInput').addEventListener('input', function(e) {
            clearTimeout(searchTimeout);
            searchTimeout = setTimeout(() => {
                showSearchResults(e.target.value.toLowerCase());
            }, 300);
        });

        // Close search results when clicking outside
        document.addEventListener('click', function(e) {
            const searchBox = document.querySelector('.search-box');
            const searchResults = document.getElementById('searchResults');
            if (!searchBox.contains(e.target)) {
                searchResults.style.display = 'none';
            }
        });

        // Load auth state on page load
        window.onload = function() {
            loadAuthState(); // Load saved auth state first
            // Don't perform initial search - homepage shows no results by default
            // Show "Why we're different" section by default
            document.getElementById('whyDifferentSection').style.display = 'block';
        };

        // Function to hide/show hero section
        function hideHeroSection() {
            document.querySelector('.hero-section').style.display = 'none';
            document.querySelector('.testimonial-section').style.display = 'none';
        }

        function showHeroSection() {
            document.querySelector('.hero-section').style.display = 'flex';
            document.querySelector('.testimonial-section').style.display = 'flex';
        }

        function showHomepage(event) {
            event.preventDefault();
            showHeroSection(); // Show hero section
            document.getElementById('whyDifferentSection').style.display = 'block'; // Show "Why we're different" section
            // Clear results grid to show no professors
            document.getElementById('resultsGrid').innerHTML = '';
            // Reset search inputs
            document.getElementById('searchInput').value = '';
            document.getElementById('schoolSelect').value = '';
            document.getElementById('schoolSortOptions').style.display = 'none';
        }

        // Functions for header links
        function showAllProfessors(event) {
            if (event && event.preventDefault) {
                event.preventDefault(); // Prevent default link behavior
            }
            window.scrollTo(0, 0); // Ensure at top
            hideHeroSection(); // Hide hero section
            document.getElementById('whyDifferentSection').style.display = 'none'; // Hide "Why we're different" section
            displayResults(professors, 'professors');
            document.getElementById('schoolSortOptions').style.display = 'none'; // Hide school sort
            window.scrollTo(0, 0); // Ensure at top after display
        }

        function showAllSchools(event) {
            if (event && event.preventDefault) {
                event.preventDefault(); // Prevent default link behavior
            }
            window.scrollTo(0, 0); // Ensure at top
            hideHeroSection(); // Hide hero section
            document.getElementById('whyDifferentSection').style.display = 'none'; // Hide "Why we're different" section
            
            // Use the actual school data from data.json
            window.allSchoolsData = schools.map(school => {
                // Calculate average rating from professors at this school
                const schoolProfessors = professors.filter(prof => 
                    prof.schoolAffiliations.some(aff => aff.schoolId === school.id && aff.isCurrent)
                );
                let averageRating = 4.0; // Default rating
                if (schoolProfessors.length > 0) {
                    const totalRating = schoolProfessors.reduce((sum, prof) => sum + prof.ratings.overall, 0);
                    averageRating = totalRating / schoolProfessors.length;
                }
                return { 
                    name: school.name, 
                    averageRating: parseFloat(averageRating.toFixed(1)),
                    id: school.id
                };
            });

            document.getElementById('schoolSortOptions').style.display = 'block'; // Show school sort

            // Trigger initial sort (Top Rated) and display
            document.getElementById('schoolSort').value = 'topRated';
            sortAndDisplaySchools();

            // Clear the search input and school select when showing all schools
            document.getElementById('searchInput').value = '';
            document.getElementById('schoolSelect').value = '';
            window.scrollTo(0, 0); // Ensure at top after display
        }

        function showAllCourses(event) {
            if (event && event.preventDefault) {
                event.preventDefault(); // Prevent default link behavior
            }
            window.scrollTo(0, 0); // Ensure at top
            hideHeroSection(); // Hide hero section

            // Use the courses from the loaded data
            displayResults(courses, 'courses');

            document.getElementById('schoolSortOptions').style.display = 'none'; // Hide school sort

             // Clear the search input and school select when showing all courses
            document.getElementById('searchInput').value = '';
            document.getElementById('schoolSelect').value = '';
            window.scrollTo(0, 0); // Ensure at top after display
        }

        // Function to sort and display schools
        function sortAndDisplaySchools() {
            window.scrollTo(0, 0); // Ensure at top
            const sortValue = document.getElementById('schoolSort').value;
            let sortedSchools = [...window.allSchoolsData]; // Create a copy to avoid modifying original

            if (sortValue === 'topRated') {
                sortedSchools.sort((a, b) => b.averageRating - a.averageRating);
            } else if (sortValue === 'alphabetical') {
                sortedSchools.sort((a, b) => a.name.localeCompare(b.name));
            }

            displayResults(sortedSchools, 'schools');
            window.scrollTo(0, 0); // Ensure at top after display
        }

        // Add event listener to the sort dropdown
        document.getElementById('schoolSort').addEventListener('change', sortAndDisplaySchools);

        // Disable browser scroll restoration
        if ('scrollRestoration' in history) {
            history.scrollRestoration = 'manual';
        }

        // Prevent default scroll behavior on hash links (both internal and external)
        document.addEventListener('click', (e) => {
            const link = e.target.closest('a[href*="#"]');
            if (link) {
                const href = link.getAttribute('href');
                // Check if it's a hash link to professors, schools, or classes
                if (href.includes('#professors') || href.includes('#schools') || href.includes('#classes')) {
                    e.preventDefault();
                    e.stopPropagation();
                    window.scrollTo(0, 0);
                    // Extract hash and navigate
                    const hashMatch = href.match(/#(professors|schools|classes)/);
                    if (hashMatch) {
                        window.location.hash = hashMatch[0];
                        setTimeout(() => {
                            window.scrollTo(0, 0);
                            handleHashNavigation();
                        }, 0);
                    }
                    return false;
                }
            }
        }, true);

        // Immediately prevent any scrolling on page load
        (function() {
            window.scrollTo(0, 0);
            if (window.location.hash) {
                // Only handle hash if it's a valid section (professors, schools, classes)
                const hash = window.location.hash.substring(1);
                if (!['professors', 'schools', 'classes'].includes(hash)) {
                    history.replaceState(null, null, window.location.pathname);
                }
            }
        })();

        // Ensure page always starts at the top
        window.scrollTo(0, 0);
        
        document.addEventListener('DOMContentLoaded', () => {
            window.scrollTo(0, 0);
        });

        function filterBySchool(schoolId) {
            console.log(`Filtering by school: ${schoolId}`); // Log for debugging

            // Clear the search input
            document.getElementById('searchInput').value = '';

            // Set the school dropdown to the selected school
            document.getElementById('schoolSelect').value = schoolId;

            // Set the 'Professors' tab as active
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelector('.tab:first-child').classList.add('active');

            // Hide the school sort options
            document.getElementById('schoolSortOptions').style.display = 'none';

            // Perform search with the selected school
            performSearch();
        }
    </script>
    <!-- Ensure anchor targets exist -->
    <div id="professors"></div>
    <div id="schools"></div>
    <div id="classes"></div>
</body>
</html> 